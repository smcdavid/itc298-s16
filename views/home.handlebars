<h1>Welcome!</h1>
<h2>This will be my time keeping/managment site!</h2>
<h3>What event are you looking for?</h3>

<form method="POST" action="/search">
    <input type="text" name="what" placeholder="Name of Event" >
    <button>Search</button>
    <button>New Event</button>
</form>
<hr>
<table>
    <tr>
        <th>what</th>
        <th>where</th>
        <th>time</th>
        <th>when</th>
    </tr>    
{{#each events}}
    <tr onclick="javascript:editEvent(this);">
        <td>{{what}}</td>
        <td>{{where}}</td>
        <td>{{time}}</td>
        <td>{{shortDate when}}</td>
    </tr>
{{/each}}
</table>


<script>
    $(document).ready(function(){
        var buttons = $('button');
        
        buttons.on('click', function() {
            var $this = $(this);
            var action = $this.text().toLowerCase();
            if (action == 'new event') {
                event.preventDefault();
                location.href = "/detail/" + $("input:text[name=what]").val();
            } else {
                $("form").attr("action", "/" + action);
            }
        });
    });
    
    function editEvent(row) {
        var what = $(row).children().first().text();
        location.href = "/detail/" + what;
    }
    
</script>